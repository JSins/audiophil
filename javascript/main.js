// Arrays -------------------------
let steine = [
  ["Heilstein (Rot)"],
  ["Heilstein (Blau)"],
  ["Heilstein (Grün)"],
  ["Heilstein (Violett)"],
  ["Heilstein (Schwarz)"],
  ["Heilstein (Weiß)"],
  ["Heilstein (Gelb)"],
  ["Heilstein (Eisblau)"],
  ["Heilstein (Okka)"],
  ["Heilstein (Braun)"]
];

let steininfo = [
  ["Stein des Feuers"],
  ["Heilstein (Blau)"],
  ["Heilstein (Grün)"],
  ["Heilstein (Violett)"],
  ["Heilstein (Schwarz)"],
  ["Heilstein (Magenta)"],
  ["Heilstein (Gelb)"],
  ["Heilstein (Orange)"],
  ["Heilstein (Rosa)"],
  ["Heilstein (Braun)"]
];

let games = [
["Ace Combat 6"],
["Ori and the Blind Forest"],
["Crysis 3"],
["Minecraft"],
["Battlefield 1"],
["The Elderscrolls V - Skyrim"],
["Star Wars Battlefront 2"],
["Assault Cube"],
["Fallout 4"],
["Halo - Combat Evolved"]
];

let gamesinfo = [
  ["Ace Combat ist eine Serie von arcadelastigen Videospielen der japanischen Softwarefirma Namco für verschiedene Plattformen aus der Kategorie der militärischen Flugsimulationen bzw. Actionspiel.Der erste Teil erschien 1995 unter dem Titel Air Combat für die erste Sony PlayStation und war so erfolgreich, dass gleich mehrere Sequels, später auch auf der PlayStation 2, erschienen."],
  ["Ori and the Blind Forest ist ein Jump-’n’-Run-Spiel, das von Moon Studios, einem unabhängigen Entwicklerstudio aus Österreich, entwickelt wurde und von Microsoft Studios vertrieben wird. Das Spiel wurde am 11. März 2015 für Xbox One und Windows als Download-Titel veröffentlicht. Für Ende 2015 war die Veröffentlichung einer Version für Xbox 360 angekündigt."],
  ["Crysis 3 spielt im Jahre 2047 im völlig verwucherten und zerstörten New York. In Crysis 2 begeht Prophet Suizid, aber da sein Geist in seinem Nanosuit weiterlebt, wurde der Körper von Alcatraz mit seinem Geist verbunden. Man untersucht zusammen mit seinem alten Freund Psycho im Libertydome, einer über New York errichteten Kuppel zum Einsperren des Manhattan-Virus und der Ceph, die Aktivität der C.E.L.L., einer Elite-Privatarmee von Crynet Systems."],
  ["Minecraft ist ein Open-World-Spiel (ursprünglich Indie-Open-World-Spiel), das vom schwedischen Programmierer Markus „Notch“ Persson erschaffen und von dessen Firma Mojang, welche im September 2014 für 2,5 Milliarden Dollar (etwa 1,9 Milliarden Euro) durch den Microsoft-Konzern aufgekauft wurde,[18] veröffentlicht wurde und bis heute weiterentwickelt wird."],
  ["Battlefield 1 spielt zur Zeit des Ersten Weltkrieges. Die Schauplätze sind unter anderem die Westfront, die italienischen Alpen sowie die arabische Wüste. Zeitgenössische Fahr- und Flugzeuge wie beispielsweise Mark-V-Panzer und Doppeldecker, sowie Kavallerie sind spielbar. Auch gibt es Giftgasangriffe. Der Nahkampf steht mehr als in den Vorgängerspielen im Vordergrund."],
  ["Die Handlung des Spiels setzt circa 200 Jahre nach den Ereignissen in The Elder Scrolls IV: Oblivion an. So finden sich auch einige Bezüge zum Vorgängerteil wieder. Den Ort der Geschehnisse bildet die nördlich von Cyrodiil gelegene Provinz Himmelsrand (Skyrim). Der Hintergrund ist eine Weissagung der für die Serie namensgebenden „Elder Scrolls“ über die Rückkehr der Drachen."],
  ["Das Spiel beginnt vor der Schlacht von Endor auf der Invincible Faith, einem Großkampfschiff der Rebellenallianz, wo Iden gefangen gehalten und vernommen wird. Vor dem Einsetzen der Handlung fing das Schiff eine imperiale Botschaft ab, die, einmal entschlüsselt, die Rebellen vor der Falle des Imperators Palpatine über dem Waldmond Endor warnen würde."],
  ["Das AssaultCube-Projekt begann im Juli 2004. Der erste offizielle Release war im November 2006 unter dem Namen „ActionCube“. Der Plan der Entwickler war, die Einfachheit von Cube in eine realistischere Umgebung zu übertragen.[1]Auf Wunsch der Entwickler von Action Quake 2 wurde das Spiel am 6. Mai 2007 in AssaultCube umbenannt."],
  ["Die Handlung von Fallout 4 spielt im Jahr 2287, zehn Jahre nach den Geschehnissen von Fallout 3 und sechs Jahre nach Fallout: New Vegas. Fallout 4 handelt in einer postapokalyptischen Spielwelt in der Gegend von Boston und Teilen Neuenglands, genannt „Commonwealth“."],
  ["Das Spiel spielt im Jahre 2552, als das Volk der Erde aufgrund der Überbevölkerung gezwungen war, auf anderen Planeten zu siedeln. 32 Jahre vorher war der Kontakt zu einer äußeren Kolonie namens „Harvest“ verloren gegangen. Als ein Kampfverband zur Erkundung geschickt wurde, kam nur ein einziges schwer beschädigtes Schiff zurück. Die Crew berichtete von einem „unbesiegbaren außerirdischen Schiff“, das die menschlichen Streitkräfte mühelos vernichtete. Das war die erste Begegnung mit der Allianz."]
];

let wein = [
  ["Pinot Noir"],
  ["Cabernet Sauvignon Yaku"],
  ["Shiraz/Viognier Reserve"],
  ["Messias Selection Douro"],
  ["Shiraz"],
  ["Classico Cabernet Sauvignon"],
  ["Giorgio"],
  ["Pinotage"],
  ["Teanum Favugne Red 2018"],
  ["Vento Nero di Troia"]
  ];

  let weininfo = [
    ["Der Wein wurde zu 100% in neuen, französischen Eichenbarriques für 13 Monate ausgebaut. In der Nase und am Gaumen zeigt er sich mit ausgeprägtem aber nicht zu beunruhigendem, röstigem Charakter."],
    ["Cassis und Paprika sind die typischen Aromen des Cabernet Sauvignon. Ganz und gar untypisch sind die Fülle, Klarheit und Komplexität, mit der sich diese Aromen hier präsentieren."],
    ["Saftige Noten reifer Pflaume und schwarzer Johannisbeere werden bereichert durch Spuren von Kaffee und Schokolade. Weiche Tannine verleihen dem Arabella Shiraz / Viognier Reserve eine feste Struktur und ein wunderbar weiches, anhaltendes Finale."],
    ["Der Messias Selection Douro Tinto präsentiert sich konzentriert und fest gebaut mit dunkler Beerenfrucht, herber Würze und kräftigem Tannin. Mit Luft wird er geschliffener und saftiger - das ist typisches, urtümliches Portugal!"],
    ["Von tiefem Burgunderrot und mit auffordernden Aromen von Vanille und Mokka, besticht das Bouquet des Arabella Shiraz. Der Gaumen belohnt mit anhaltenden Nuancen von Lakritz und reifer Schwarzkirsche, welche unterstützt werden durch weiches, würziges Tannin."],
    ["Giorgia Dalla Cia baut mit viel Dolce Vita und Innovation ein großartiges Weinsortiment aus - dieser Dalla Cia Classico Cabernet Sauvignon ist dabei nur ein Beispiel, aber ein ganz besonderes."],
    ["Dieser Rotwein ist üppig, gut strukturiert und körperreich. Sein Mundgefühl ist wohlwollend und sein Nachhall lang. Er besitzt tolles Alterungspotential."],
    ["Im Glas zeigt der Raka Pinotage eine tintenähnliche Farbe.In der Nase erleben wir unmissverständlich Pinotage. Deutlich lassen sich Aromen von dunklen Beeren, grüner Bananenschale und weicher Vanille vom Holzfassausbau ausmachen."],
    ["Dieser kräftige Rotwein wurde nach einem heißen, trockenen Wind benannt. Der Favugne spielte bereits in der griechischen Mythologie eine besondere Rolle."],
    ["Frischer Wind in der Weinlandschaft Apuliens! Der Vento Nero di Troia Primitivo verwöhnt das Auge mit seiner strahlend roten Farbe."]
  ];

let warenkorbarray = [];
// ---------------------------------





// Shop-Auswahl --------------------------------------------------------------

var auswahl = "";
var produktanzahl;

$('.wahl').click(function(){
  auswahl = this.id;
  console.log(auswahl);


  if(auswahl == 'steine')
  {
    produktanzahl = steine.length;
    $('.hintergrundfarbe').css("background", "#000000");
    $('.standard').css("font-family", "Overpass, sans-serif");
  }
  else if(auswahl == 'games')
  {
    produktanzahl = games.length;
    $('.hintergrundfarbe').css("background", "#000000");
    $('.standard').css("font-family", "Bebas Neue, cursive");
    $('p').css("font-family", "Overpass, sans-serif");
  }
  else if(auswahl == 'wein')
  {
    produktanzahl = wein.length;
    $('.hintergrundfarbe').css("background", "#000000");
    $('.standard').css("font-family", "Overpass, sans-serif");
  }
});

// ----------------------------------------------------------------------------





// Startbildschirm ausblenden -------------------------------------------------
let hintergrundstein = new Audio('audio/breathee.mp3');

$('#startbutton').click(()=>{
  if(auswahl == "")
  {
    alert("Wählen Sie bitte zuerst ein Thema.")
  }
  else
  {
    $('#full').fadeOut(3000).hide(1000);

    if(auswahl == 'steine')
    {
      hintergrundstein.play();
      hintergrundstein.volume = 0.7;
    }
    if(auswahl == 'games')
    {
      
    }
    if(auswahl == 'wein')
    {
      
    }
    
    
    blendinproducts();
  }

})

// ----------------------------------------------------------------------------






let buttonaudio = new Audio('audio/click2_01.mp3');
$(document).on('click', 'button', function(){
  buttonaudio.play();
})















// Warenkorb -----------------------------------------------------------------------------------------


function warenkorbrefresh()
{
  $('#warenkorb').html('Warenkorb (' + warenkorbarray.length + ')');
}

warenkorbrefresh();

// ---------------------------------------------------------------------------------------------------




function clamp(val, min, max) {
  return val > max ? max : val < min ? min : val;
}





// Rechnungserstellung je nach mouseenter oder leave ------------------------------------------------------------------------------

$(document).on('mouseenter', '.produkt', function() {

  $('.produkt:not(#' + this.id + ')').clearQueue().fadeTo(1000, 0.2);
  statuse[this.id] = 1;
  zaehlers[this.id] = 0.04;
  
  sounds[this.id].play();
  sounds[this.id].volume = 0;
  var iddesobjects = this.id;

  var int = setInterval( function() 
  {
      // Die Rechnung -----------------------------------------------------------
      lauts[iddesobjects] = lauts[iddesobjects] + zaehlers[iddesobjects];
      // ------------------------------------------------------------------------
      
      // Wert Runden und Lautstärke setzen --------------------------------------
      console.log(iddesobjects + ' ' + Math.round(lauts[iddesobjects]*100)/100);
      sounds[iddesobjects].volume = clamp(lauts[iddesobjects], 0, 1);
      // ------------------------------------------------------------------------

    if (lauts[iddesobjects] >= 0.999 || statuse[iddesobjects] == 0)
    {
      clearInterval(int);
      return;
    }
  }, 40);
  
});


$(document).on('mouseleave', '.produkt', function() {
  $('.produkt:not(#' + this.id + ')').clearQueue().fadeTo(1000, 0.8);

  statuse[this.id] = 0;
  zaehlers[this.id] = -0.04;

  sounds[this.id].volume = 0;
  var iddesobjects = this.id;

  var int = setInterval( function() 
  {
      // Die Rechnung -----------------------------------------------------------
      lauts[iddesobjects] = lauts[iddesobjects] + zaehlers[iddesobjects];
      // ------------------------------------------------------------------------
      
      // Wert Runden und Lautstärke setzen --------------------------------------
      console.log(iddesobjects + ' ' + Math.round(lauts[iddesobjects]*100)/100);
      sounds[iddesobjects].volume = clamp(lauts[iddesobjects], 0, 1);
      // ------------------------------------------------------------------------

    if (statuse[iddesobjects] == 1)
    {
      clearInterval(int);
      return;
    }
    
    if(lauts[iddesobjects] < 0.001)
    {
      sounds[iddesobjects].pause();
      clearInterval(int);
      return;
    }
  }, 40);
});

// ---------------------------------------------------------------------------------------------------------------------------------










// Produkte aus Array aussgeben -------------------------------------------------------------------------------------------------

let i;
var counter = 0;
var sounds = [];
var zaehlers = [];
var lauts = [];
var statuse =[];
var neu;




function blendinproducts()
{

  // Statische Elemente laden ---------------------------------------------------------

  if(auswahl == 'steine')
  {
    $('header').append("<div class='kopf' id='headsteine'><h1>Kahnwald Heilsteine</h1></div>");
    $('#beschreibungstext').append("<h1>Lassen Sie sich natürlich heilen!</h1><hr><p>Unsere Heilsteine sind mit die besten auf dem Markt. Erleben Sie hier ein einzigartiges Shopping-Erlebnis und lassen Sie sich ganz auf die heilende Ausstrahlung unserer Steine ein.</p>");
  }
  else if(auswahl == 'games')
  {
    $('header').append("<div class='kopf' id='headgames'><h1>Kahnwald Games</h1></div>");
    $('#beschreibungstext').append("<h1>Spielen bis zum Limit!</h1><hr><p>Hier bekommst du alle neuen Top-Games. Erlebe nur hier einen einzigartigen Vorgeschmack auf das, was dich in den virtuellen Welten erwartet!</p>");
  }
  else if(auswahl == 'wein')
  {
    $('header').append("<div class='kopf' id='headwein'><h1>Kahnwald Wein</h1></div>");
    $('#beschreibungstext').append("<h1>Exklusiver Wein - Einzigartiger Genuss!</h1><hr><p>Unser Wein ist handverlesen und schmeckt sogar den Göttern. Testen Sie uns aus und lassen Sie sich von unserem qualitativen Wein verführen.</p>");
  }

  // ----------------------------------------------------------------------------------


  for(i = 0; i <= produktanzahl-1; i++)
  {  
    if(auswahl == 'steine')
    {
      $('#produkte').append("<div class='produkt' id='" + i + "'><img src='img/" + auswahl + "/" + i + ".jpg' class='produktbild'><h3>" + steine[i] + "</h3></div>");
    }
    else if(auswahl == 'games')
    {
      $('#produkte').append("<div class='produkt' id='" + i + "'><img src='img/" + auswahl + "/" + i + ".jpg' class='produktbild'><h3>" + games[i] + "</h3></div>");
    }
    else if(auswahl == 'wein')
    {
      $('#produkte').append("<div class='produkt' id='" + i + "'><img src='img/" + auswahl + "/" + i + ".jpg' class='produktbild'><h3>" + wein[i] + "</h3></div>");
    }


    $('#' + i).hide();
    counter++;
    console.log(counter);

    // Sounds in Array schreiben ---------------------
    sounds[i] = new Audio('audio/' + auswahl + '/' + i + '.mp3');
    zaehlers[i] = 0;
    lauts[i] = 0;
    statuse[i] = 0;
  
    // -----------------------------------------------
  }
  
  // ------------------------------------------------------------------------------------------------------------------------------
  
  //  Wenn Array durchlesen fertig ist, dann fade die nach und nach ein -------------------------------------------------------------
  
  if(counter == produktanzahl);
  {
      counter = 0;
      console.log("done");
      setInterval(function(){
         $('#' + counter).fadeTo(1000, 1);
          counter++;
          }, 200); 
  }
}

// ---------------------------------------------------------------------------------------------------------------------------------




function blendinwarenkorb()
{
  $('#warenkorbbox').html("");
  for(i = 0; i <= warenkorbarray.length-1; i++)
  {
    if(auswahl == 'steine')
    {
      $('#warenkorbbox').append("<div class='warenkorbprodukt' id='" + i + "'><img src='img/" + auswahl + "/" + warenkorbarray[i] + ".jpg' class='warenkorbproduktbild'><div class='warenkorbproduktbeschriftung'><h3>" + steine[warenkorbarray[i]] + "</h3></div></div>");
    }
    else if(auswahl == 'games')
    {
      $('#warenkorbbox').append("<div class='warenkorbprodukt' id='" + i + "'><img src='img/" + auswahl + "/" + warenkorbarray[i] + ".jpg' class='warenkorbproduktbild'><div class='warenkorbproduktbeschriftung'><h3>" + games[warenkorbarray[i]] + "</h3></div></div>");
    }
    else if(auswahl == 'wein')
    {
      $('#warenkorbbox').append("<div class='warenkorbprodukt' id='" + i + "'><img src='img/" + auswahl + "/" + warenkorbarray[i] + ".jpg' class='warenkorbproduktbild'><div class='warenkorbproduktbeschriftung'><h3>" + wein[warenkorbarray[i]] + "</h3></div></div>");
    }
    {}
    
  }
  console.log(warenkorbarray.length);
  if(warenkorbarray.length > 0)
  {
    $('#warenkorbbox').append("<button id='kaufen'>Jetzt kaufen!</button>");
  }
  
}






// Produkt aufrufen -------------------------------------------------------------------------------------------------------

let produktid;

$(document).on('click', '.produkt', function() {
    zaehlers[this.id] = 0;
    produktid = this.id;
    $('#einzelprodukt').html("");
    $('#produkte').fadeTo(1000, 0).hide(1);
    $('#einzelprodukt').show(1000).fadeTo(1000, 1);
    if(auswahl == 'steine')
    {
      $('#einzelprodukt').append("<img src='img/" + auswahl + "/" + this.id + ".jpg' id='grossbild'><div id='infotext'><h1 id='einzelhead'>" + steine[this.id] + "</h1><hr><section id='beschreibung'>" + steininfo[this.id] + "</section><button id='inwarenkorb'>In den Warenkorb</button></div>");
    }
    else if(auswahl == 'games')
    {
      $('#einzelprodukt').append("<img src='img/" + auswahl + "/" + this.id + ".jpg' id='grossbild'><div id='infotext'><h1 id='einzelhead'>" + games[this.id] + "</h1><hr><section id='beschreibung'>" + gamesinfo[this.id] + "</section><button id='inwarenkorb'>In den Warenkorb</button></div>");
    }
    else if(auswahl == 'wein')
    {
      $('#einzelprodukt').append("<img src='img/" + auswahl + "/" + this.id + ".jpg' id='grossbild'><div id='infotext'><h1 id='einzelhead'>" + wein[this.id] + "</h1><hr><section id='beschreibung'>" + weininfo[this.id] + "</section><button id='inwarenkorb'>In den Warenkorb</button></div>");
    }
});

// ------------------------------------------------------------------------------------------------------------------------







// Zurück-Knopf -----------------------------------------------------------------------------------------------------------

function zurück()
{
  $('#warenkorbbox').fadeTo(1000, 0).hide(1);
  $('#einzelprodukt').fadeTo(1000, 0).hide(1);
  $('#produkte').show(1000).fadeTo(1000, 1);
}

$('.back').click(()=>{
  zurück();
});

// -----------------------------------------------------------------------------------------------------------------------



// In den Warenkorb legen ------------------------------------------------------------------------------------------------

$(document).on('click', '#inwarenkorb', function() {
  warenkorbarray.push(produktid);
  console.log(warenkorbarray);
  warenkorbrefresh();
  zurück();
});

// -----------------------------------------------------------------------------------------------------------------------



// Warenkorb aufrufen ----------------------------------------------------------------------------------------------------

$('#warenkorb').click(function()
{

  blendinwarenkorb();
  $('#einzelprodukt').html("");
  $('#produkte').fadeTo(1000, 0).hide(1);
  $('#warenkorbbox').show(1000).fadeTo(1000, 1);
});

// -----------------------------------------------------------------------------------------------------------------------



// Kaufen und Credits ----------------------------------------------------------------------------------------------------

let katsching = new Audio('audio/katsching.mp3');
$(document).on('click', '#kaufen', function(){
  console.log('gekauft');
  katsching.play();

  $('#fullinhalt').html("Vielen Dank fürs Mitmachen! Bitte füllen Sie nun den beigefügten Fragebogen aus.<br>Wenn Sie von vorn beginnen wollen, drücken sie nun F5.");
  $('#full').fadeIn(3000);
})

// -----------------------------------------------------------------------------------------------------------------------

